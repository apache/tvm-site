<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source to the Rust file `/workspace/rust/tvm-sys/src/c_runtime_api.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>c_runtime_api.rs.html -- source</title><link rel="stylesheet" type="text/css" href="../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../../ayu.css" disabled ><script src="../../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../../../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../../tvm_sys/index.html'><div class='logo-container rust-logo'><img src='../../../../../../rust-logo.png' alt='logo'></div></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../../../../settings.html"><img src="../../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
</pre><div class="example-wrap"><pre class="rust ">
<span class="comment">/* automatically generated by rust-bindgen */</span>

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVM_VERSION</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="ident">u8</span> ; <span class="number">9usize</span>] <span class="op">=</span> <span class="string">b&quot;0.8.dev0\0&quot;</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLPACK_VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">16</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_STDINT_H</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_FEATURES_H</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_DEFAULT_SOURCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_ISOC11</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_ISOC99</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_ISOC95</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_POSIX_IMPLICITLY</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_POSIX_SOURCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_POSIX_C_SOURCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">200809</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_POSIX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_POSIX2</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_POSIX199309</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_POSIX199506</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_XOPEN2K</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_XOPEN2K8</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_ATFILE_SOURCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_MISC</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_ATFILE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__USE_FORTIFY_LEVEL</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_STDC_PREDEF_H</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__STDC_IEC_559__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__STDC_IEC_559_COMPLEX__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__STDC_ISO_10646__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">201505</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__STDC_NO_THREADS__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__GNU_LIBRARY__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">6</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__GLIBC__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__GLIBC_MINOR__</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">23</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_SYS_CDEFS_H</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__WORDSIZE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">64</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__WORDSIZE_TIME64_COMPAT32</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">__SYSCALL_WORDSIZE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">64</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">_BITS_WCHAR_H</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT8_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">128</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT16_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">32768</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT32_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">2147483648</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT8_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">127</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT16_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">32767</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT32_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2147483647</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT8_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">255</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT16_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">65535</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT32_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">4294967295</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_LEAST8_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">128</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_LEAST16_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">32768</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_LEAST32_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">2147483648</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_LEAST8_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">127</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_LEAST16_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">32767</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_LEAST32_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2147483647</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT_LEAST8_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">255</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT_LEAST16_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">65535</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT_LEAST32_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">4294967295</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_FAST8_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">128</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_FAST16_MIN</span> : <span class="ident">i64</span> <span class="op">=</span> <span class="op">-</span> <span class="number">9223372036854775808</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_FAST32_MIN</span> : <span class="ident">i64</span> <span class="op">=</span> <span class="op">-</span> <span class="number">9223372036854775808</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_FAST8_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">127</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_FAST16_MAX</span> : <span class="ident">u64</span> <span class="op">=</span> <span class="number">9223372036854775807</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INT_FAST32_MAX</span> : <span class="ident">u64</span> <span class="op">=</span> <span class="number">9223372036854775807</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT_FAST8_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">255</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT_FAST16_MAX</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINT_FAST32_MAX</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INTPTR_MIN</span> : <span class="ident">i64</span> <span class="op">=</span> <span class="op">-</span> <span class="number">9223372036854775808</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">INTPTR_MAX</span> : <span class="ident">u64</span> <span class="op">=</span> <span class="number">9223372036854775807</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">UINTPTR_MAX</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">PTRDIFF_MIN</span> : <span class="ident">i64</span> <span class="op">=</span> <span class="op">-</span> <span class="number">9223372036854775808</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">PTRDIFF_MAX</span> : <span class="ident">u64</span> <span class="op">=</span> <span class="number">9223372036854775807</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIG_ATOMIC_MIN</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">2147483648</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIG_ATOMIC_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2147483647</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZE_MAX</span> : <span class="ident">i32</span> <span class="op">=</span> <span class="op">-</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">WINT_MIN</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">WINT_MAX</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">4294967295</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_least8_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_schar</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_least16_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_short</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_least32_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_least64_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_long</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_least8_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uchar</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_least16_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_ushort</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_least32_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_least64_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_ulong</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_fast8_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_schar</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_fast16_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_long</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_fast32_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_long</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">int_fast64_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_long</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_fast8_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uchar</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_fast16_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_ulong</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_fast32_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_ulong</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uint_fast64_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_ulong</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">intmax_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_long</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">uintmax_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_ulong</span> ; <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">wchar_t</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief CPU device&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLCPU</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">1</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief CUDA GPU device&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLGPU</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">2</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Pinned CUDA GPU device by cudaMallocHost&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note kDLCPUPinned = kDLCPU | kDLGPU&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLCPUPinned</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">3</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief OpenCL devices.&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLOpenCL</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">4</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Vulkan buffer for next generation graphics.&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLVulkan</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">7</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Metal for Apple GPU.&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLMetal</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">8</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Verilog simulator buffer&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLVPI</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">9</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief ROCm GPUs for AMD GPUs&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLROCM</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">10</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Reserved extension device type,&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; used for quickly test extension device&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The semantics can differ depending on the implementation.&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDeviceType_kDLExtDev</span> : <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="number">12</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The device type in DLContext.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">DLDeviceType</span> <span class="op">=</span> <span class="ident">u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief A Device context for Tensor and operator.&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">PartialEq</span> , <span class="ident">Eq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DLContext</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The device type used in the device.&quot;</span>] <span class="kw">pub</span> <span class="ident">device_type</span> : <span class="ident">DLDeviceType</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The device index&quot;</span>] <span class="kw">pub</span> <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , } <span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">DLContext</span> { <span class="kw">fn</span> <span class="ident">default</span> () <span class="op">-&gt;</span> <span class="self">Self</span> { <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } } } <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDataTypeCode_kDLInt</span> : <span class="ident">DLDataTypeCode</span> <span class="op">=</span> <span class="number">0</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDataTypeCode_kDLUInt</span> : <span class="ident">DLDataTypeCode</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDataTypeCode_kDLFloat</span> : <span class="ident">DLDataTypeCode</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">DLDataTypeCode_kDLBfloat</span> : <span class="ident">DLDataTypeCode</span> <span class="op">=</span> <span class="number">4</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The type code options DLDataType.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">DLDataTypeCode</span> <span class="op">=</span> <span class="ident">u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The data type the tensor can hold.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  Examples&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   - float: type_code = 2, bits = 32, lanes=1&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   - float4(vectorized 4 float): type_code = 2, bits = 32, lanes=4&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   - int8: type_code = 0, bits = 8, lanes=1&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Debug</span> , <span class="ident">Default</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">PartialEq</span> , <span class="ident">Eq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DLDataType</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Type code of base types.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; We keep it uint8_t instead of DLDataTypeCode for minimal memory&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; footprint, but the value should be one of DLDataTypeCode enum values.&quot;</span>] <span class="kw">pub</span> <span class="ident">code</span> : <span class="ident">u8</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Number of bits, common choices are 8, 16, 32.&quot;</span>] <span class="kw">pub</span> <span class="ident">bits</span> : <span class="ident">u8</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Number of lanes in the type, used for vector types.&quot;</span>] <span class="kw">pub</span> <span class="ident">lanes</span> : <span class="ident">u16</span> , } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Plain C Tensor object, does not manage memory.&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">PartialEq</span> , <span class="ident">Eq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DLTensor</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The opaque data pointer points to the allocated data. This will be&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; CUDA device pointer or cl_mem handle in OpenCL. This pointer is always&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; aligned to 256 bytes as in CUDA.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; For given DLTensor, the size of memory required to store the contents of&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; data is calculated as follows:&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\code{.c}&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; static inline size_t GetDataSize(const DLTensor* t) {&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   size_t size = 1;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   for (tvm_index_t i = 0; i &lt; t-&gt;ndim; ++i) {&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;     size *= t-&gt;shape[i];&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   }&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   size *= (t-&gt;dtype.bits * t-&gt;dtype.lanes + 7) / 8;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   return size;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; }&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\endcode&quot;</span>] <span class="kw">pub</span> <span class="ident">data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The device context of the tensor&quot;</span>] <span class="kw">pub</span> <span class="ident">ctx</span> : <span class="ident">DLContext</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Number of dimensions&quot;</span>] <span class="kw">pub</span> <span class="ident">ndim</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The data type of the pointer&quot;</span>] <span class="kw">pub</span> <span class="ident">dtype</span> : <span class="ident">DLDataType</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The shape of the tensor&quot;</span>] <span class="kw">pub</span> <span class="ident">shape</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">i64</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief strides of the tensor (in number of elements, not bytes)&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  can be NULL, indicating tensor is compact and row-majored.&quot;</span>] <span class="kw">pub</span> <span class="ident">strides</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">i64</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The offset in bytes to the beginning pointer to data&quot;</span>] <span class="kw">pub</span> <span class="ident">byte_offset</span> : <span class="ident">u64</span> , } <span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">DLTensor</span> { <span class="kw">fn</span> <span class="ident">default</span> () <span class="op">-&gt;</span> <span class="self">Self</span> { <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief C Tensor object, manage memory of DLTensor. This data structure is&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  intended to facilitate the borrowing of DLTensor by another framework. It is&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  not meant to transfer the tensor. When the borrowing framework doesn&#39;t need&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  the tensor, it should call the deleter to notify the host that the resource&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  is no longer needed.&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">PartialEq</span> , <span class="ident">Eq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DLManagedTensor</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief DLTensor which is being memory managed&quot;</span>] <span class="kw">pub</span> <span class="ident">dl_tensor</span> : <span class="ident">DLTensor</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief the context of the original host framework of DLManagedTensor in&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   which DLManagedTensor is used in the framework. It can also be NULL.&quot;</span>] <span class="kw">pub</span> <span class="ident">manager_ctx</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Destructor signature void (*)(void*) - this should be called&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   to destruct manager_ctx which holds the DLManagedTensor. It can be NULL&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   if there is no way for the caller to provide a reasonable destructor.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   The destructors deletes the argument self as well.&quot;</span>] <span class="kw">pub</span> <span class="ident">deleter</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">self_</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">DLManagedTensor</span>) <span class="op">&gt;</span> , } <span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">DLManagedTensor</span> { <span class="kw">fn</span> <span class="ident">default</span> () <span class="op">-&gt;</span> <span class="self">Self</span> { <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief type of array index.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">tvm_index_t</span> <span class="op">=</span> <span class="ident">i64</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMDeviceExtType_kDLAOCL</span> : <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="number">5</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMDeviceExtType_kDLSDAccel</span> : <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="number">6</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMDeviceExtType_kOpenGL</span> : <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="number">11</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMDeviceExtType_kDLMicroDev</span> : <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="number">13</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMDeviceExtType_kDLHexagon</span> : <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="number">14</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMDeviceExtType_kDLWebGPU</span> : <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="number">15</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Extension device types in TVM&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMDeviceExtType</span> <span class="op">=</span> <span class="ident">u32</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMArgInt</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">0</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMArgFloat</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMOpaqueHandle</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">3</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMNullptr</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">4</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMDataType</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">5</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMContext</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">6</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMDLTensorHandle</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">7</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMObjectHandle</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">8</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMModuleHandle</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">9</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMPackedFuncHandle</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">10</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMStr</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">11</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMBytes</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">12</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMNDArrayHandle</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">13</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMObjectRValueRefArg</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">14</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMExtBegin</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">15</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMNNVMFirst</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">16</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMNNVMLast</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">20</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMExtReserveEnd</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">64</span> ; <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">TVMArgTypeCode_kTVMExtEnd</span> : <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="number">128</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The type code in used and only used in TVM FFI for argument passing.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; DLPack consistency:&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; 1) kTVMArgInt is compatible with kDLInt&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; 2) kTVMArgFloat is compatible with kDLFloat&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; 3) kDLUInt is not in ArgTypeCode, but has a spared slot&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; Downstream consistency:&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The kDLInt, kDLUInt, kDLFloat are kept consistent with the original ArgType code&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; It is only used in argument passing, and should not be confused with&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; DataType::TypeCode, which is DLPack-compatible.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\sa tvm::runtime::DataType::TypeCode&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMArgTypeCode</span> <span class="op">=</span> <span class="ident">u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The Device information, abstract away common device types.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMContext</span> <span class="op">=</span> <span class="ident">DLContext</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief the array handle&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMArrayHandle</span> <span class="op">=</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">DLTensor</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Union type of values&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  being passed through API and function calls.&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Copy</span> , <span class="ident">Clone</span>)] <span class="kw">pub</span> <span class="ident">union</span> <span class="ident">TVMValue</span> { <span class="kw">pub</span> <span class="ident">v_int64</span> : <span class="ident">i64</span> , <span class="kw">pub</span> <span class="ident">v_float64</span> : <span class="ident">f64</span> , <span class="kw">pub</span> <span class="ident">v_handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="kw">pub</span> <span class="ident">v_str</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="kw">pub</span> <span class="ident">v_type</span> : <span class="ident">DLDataType</span> , <span class="kw">pub</span> <span class="ident">v_ctx</span> : <span class="ident">TVMContext</span> , <span class="ident">_bindgen_union_align</span> : <span class="ident">u64</span> , } <span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">TVMValue</span> { <span class="kw">fn</span> <span class="ident">default</span> () <span class="op">-&gt;</span> <span class="self">Self</span> { <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Byte array type used to pass in byte array&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  When kTVMBytes is used as data type.&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">PartialEq</span> , <span class="ident">Eq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">TVMByteArray</span> { <span class="kw">pub</span> <span class="ident">data</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="kw">pub</span> <span class="ident">size</span> : <span class="ident">usize</span> , } <span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">TVMByteArray</span> { <span class="kw">fn</span> <span class="ident">default</span> () <span class="op">-&gt;</span> <span class="self">Self</span> { <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Handle to TVM runtime modules.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMModuleHandle</span> <span class="op">=</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Handle to packed function handle.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMFunctionHandle</span> <span class="op">=</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Handle to hold return value.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMRetValueHandle</span> <span class="op">=</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The stream that is specific to device&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; can be NULL, which indicates the default one.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMStreamHandle</span> <span class="op">=</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Handle to Object.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMObjectHandle</span> <span class="op">=</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Used for implementing C API function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  Set last error message before return.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param msg The error message to be set.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMAPISetLastError</span> (<span class="ident">msg</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span>) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief return str message of the last error&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  all function in this file will return 0 when success&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  and -1 when an error occurred,&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  TVMGetLastError can be called to retrieve the error&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  this function is threadsafe and can be called by different thread&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  \\return error info&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMGetLastError</span> () <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Load module from file.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param file_name The file name to load the module from.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param format The format of the module.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The result module&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note The resulting module do not contain import relation.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  It can be reconstructed by TVMModImport.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMModLoadFromFile</span> (<span class="ident">file_name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">format</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMModuleHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Add dep to mod&#39;s dependency.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  This allows functions in this module to use modules.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param mod The module handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dep The dependent module to be imported.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMModImport</span> (<span class="ident">mod_</span> : <span class="ident">TVMModuleHandle</span> , <span class="ident">dep</span> : <span class="ident">TVMModuleHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Get function from the module.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param mod The module handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param func_name The name of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param query_imports Whether to query imported modules&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The result function, can be NULL if it is not available.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMModGetFunction</span> (<span class="ident">mod_</span> : <span class="ident">TVMModuleHandle</span> , <span class="ident">func_name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">query_imports</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMFunctionHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Free the Module&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param mod The module to be freed.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note This may not free up the module&#39;s resources.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  If there is active TVMFunctionHandle uses the module&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  Or if this module is imported by another active module.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  The all functions remains valid until TVMFuncFree is called.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMModFree</span> (<span class="ident">mod_</span> : <span class="ident">TVMModuleHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Free the function when it is no longer needed.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param func The function handle&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncFree</span> (<span class="ident">func</span> : <span class="ident">TVMFunctionHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Call a Packed TVM Function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param func node handle of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param arg_values The arguments&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_codes The type codes of the arguments&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param num_args Number of arguments.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ret_val The return value.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ret_type_code the type code of return value.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note TVM calls always exchanges with type bits=64, lanes=1&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note API calls always exchanges with type bits=64, lanes=1&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   If API call returns container handles (e.g. FunctionHandle)&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   these handles should be managed by the front-end.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   The front-end need to call free function (e.g. TVMFuncFree)&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;   to free these handles.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncCall</span> (<span class="ident">func</span> : <span class="ident">TVMFunctionHandle</span> , <span class="ident">arg_values</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">type_codes</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">num_args</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">ret_val</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">ret_type_code</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Set the return value of TVMPackedCFunc.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  This function is called by TVMPackedCFunc to set the return value.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  When this function is not called, the function returns null by default.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ret The return value handle, pass by ret in TVMPackedCFunc&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param value The value to be returned.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_code The type of the value to be returned.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param num_ret Number of return values, for now only 1 is supported.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMCFuncSetReturn</span> (<span class="ident">ret</span> : <span class="ident">TVMRetValueHandle</span> , <span class="ident">value</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">type_code</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">num_ret</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Inplace translate callback argument value to return value.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  This is only needed for non-POD arguments.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param value The value to be translated.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param code The type code to be translated.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note This function will do a shallow copy when necessary.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMCbArgToReturn</span> (<span class="ident">value</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">code</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief C type of packed function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param args The arguments&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_codes The type codes of the arguments&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param num_args Number of arguments.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ret The return value handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param resource_handle The handle additional resouce handle from fron-end.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 if success, -1 if failure happens, set error via TVMAPISetLastError.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\sa TVMCFuncSetReturn&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMPackedCFunc</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">args</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">type_codes</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">num_args</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">ret</span> : <span class="ident">TVMRetValueHandle</span> , <span class="ident">resource_handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief C callback to free the resource handle in C packed function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param resource_handle The handle additional resouce handle from fron-end.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMPackedCFuncFinalizer</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">resource_handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">&gt;</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Signature for extension function declarer.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  TVM call this function to get the extension functions&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  The declarer will call register_func to register function and their name.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param register_func_handle The register function&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 if success, -1 if failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMExtensionFuncDeclarer</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">register_func_handle</span> : <span class="ident">TVMFunctionHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> ; <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Wrap a TVMPackedCFunc to become a FunctionHandle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The resource_handle will be managed by TVM API, until the function is no longer used.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param func The packed C function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param resource_handle The resource handle from front-end, can be NULL.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param fin The finalizer on resource handle when the FunctionHandle get freed, can be NULL&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out the result function handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncCreateFromCFunc</span> (<span class="ident">func</span> : <span class="ident">TVMPackedCFunc</span> , <span class="ident">resource_handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">fin</span> : <span class="ident">TVMPackedCFuncFinalizer</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMFunctionHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Register the function to runtime&#39;s global table.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; The registered function then can be pulled by the backend by the name.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param name The name of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param f The function to be registered.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param override Whether allow override already registered function.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncRegisterGlobal</span> (<span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">f</span> : <span class="ident">TVMFunctionHandle</span> , <span class="ident">override_</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Get a global function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param name The name of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out the result function pointer, NULL if it does not exist.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note The function handle of global function is managed by TVM runtime,&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  So TVMFuncFree is should not be called when it get deleted.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncGetGlobal</span> (<span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMFunctionHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief List all the globally registered function name&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_size The number of functions&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_array The array of function names.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncListGlobalNames</span> (<span class="ident">out_size</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">out_array</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Remove a global function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param name The name of the function.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMFuncRemoveGlobal</span> (<span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Allocate a nd-array&#39;s memory,&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  including space of shape, of given spec.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param shape The shape of the array, the data content will be copied to out&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ndim The number of dimension of the array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dtype_code The type code of the dtype&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dtype_bits The number of bits of dtype&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dtype_lanes The number of lanes in the dtype.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id of context.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The output handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayAlloc</span> (<span class="ident">shape</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">tvm_index_t</span> , <span class="ident">ndim</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">dtype_code</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">dtype_bits</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">dtype_lanes</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMArrayHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Free the TVM Array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param handle The array handle to be freed.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayFree</span> (<span class="ident">handle</span> : <span class="ident">TVMArrayHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Copy array data from CPU byte array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param handle The array handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param data the data pointer&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param nbytes The number of bytes to copy.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayCopyFromBytes</span> (<span class="ident">handle</span> : <span class="ident">TVMArrayHandle</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">nbytes</span> : <span class="ident">usize</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Copy array data to CPU byte array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param handle The array handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param data the data pointer&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param nbytes The number of bytes to copy.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayCopyToBytes</span> (<span class="ident">handle</span> : <span class="ident">TVMArrayHandle</span> , <span class="ident">data</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">nbytes</span> : <span class="ident">usize</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Copy the array, both from and to must be valid during the copy.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param from The array to be copied from.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param to The target space.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param stream The stream where the copy happens, can be NULL.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayCopyFromTo</span> (<span class="ident">from</span> : <span class="ident">TVMArrayHandle</span> , <span class="ident">to</span> : <span class="ident">TVMArrayHandle</span> , <span class="ident">stream</span> : <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Produce an array from the DLManagedTensor that shares data memory&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; with the DLManagedTensor.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param from The source DLManagedTensor.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The output array handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayFromDLPack</span> (<span class="ident">from</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">DLManagedTensor</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMArrayHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Produce a DLMangedTensor from the array that shares data memory with&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; the array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param from The source array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The DLManagedTensor handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMArrayToDLPack</span> (<span class="ident">from</span> : <span class="ident">TVMArrayHandle</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">DLManagedTensor</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Delete (free) a DLManagedTensor&#39;s data.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dltensor Pointer to the DLManagedTensor.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMDLManagedTensorCallDeleter</span> (<span class="ident">dltensor</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">DLManagedTensor</span>) ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Create a new runtime stream.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The new stream handle&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMStreamCreate</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Free a created stream handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param stream The stream to be freed&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMStreamFree</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">stream</span> : <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Set the runtime stream of current thread to be stream.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  The subsequent calls to the same device_type&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  will use the setted stream handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  The specific type of stream is runtime device dependent.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id of context.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param handle The stream handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMSetStream</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">handle</span> : <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Wait until all computations on stream completes.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id of context.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param stream The stream to be synchronized.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMSynchronize</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">stream</span> : <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Synchronize two streams of execution.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id of context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param src The source stream to synchronize.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dst The destination stream to synchronize.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMStreamStreamSynchronize</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">src</span> : <span class="ident">TVMStreamHandle</span> , <span class="ident">dst</span> : <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Get the type_index from an object.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param obj The object handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_tindex the output type index.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMObjectGetTypeIndex</span> (<span class="ident">obj</span> : <span class="ident">TVMObjectHandle</span> , <span class="ident">out_tindex</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Convert type key to type index.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_key The key of the type.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_tindex the corresponding type index.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMObjectTypeKey2Index</span> (<span class="ident">type_key</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">out_tindex</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_uint</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Increase the reference count of an object.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param obj The object handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note Internally we increase the reference counter of the object.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMObjectRetain</span> (<span class="ident">obj</span> : <span class="ident">TVMObjectHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Free the object.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param obj The object handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note Internally we decrease the reference counter of the object.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;       The object will be freed when every reference to the object are removed.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMObjectFree</span> (<span class="ident">obj</span> : <span class="ident">TVMObjectHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Allocate a data space on device.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ctx The device context to perform operation.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param nbytes The number of bytes in memory.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param alignment The alignment of the memory.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_hint The type of elements. Only needed by certain backends such&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                   as nbytes &amp; alignment are sufficient for most backends.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_data The allocated device pointer.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMDeviceAllocDataSpace</span> (<span class="ident">ctx</span> : <span class="ident">DLContext</span> , <span class="ident">nbytes</span> : <span class="ident">usize</span> , <span class="ident">alignment</span> : <span class="ident">usize</span> , <span class="ident">type_hint</span> : <span class="ident">DLDataType</span> , <span class="ident">out_data</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Free a data space on device.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ctx The device context to perform operation.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ptr The data space.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMDeviceFreeDataSpace</span> (<span class="ident">ctx</span> : <span class="ident">TVMContext</span> , <span class="ident">ptr</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Copy data from one place to another.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param from The source array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param from_offset The byte offeset in the from.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param to The target array.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param to_offset The byte offset in the to.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param num_bytes The size of the memory in bytes&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ctx_from The source context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ctx_to The target context&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_hint The type of elements, only neded by certain backends.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;                  can be useful for cross device endian converison.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param stream Optional stream object.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMDeviceCopyDataFromTo</span> (<span class="ident">from</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">from_offset</span> : <span class="ident">usize</span> , <span class="ident">to</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">to_offset</span> : <span class="ident">usize</span> , <span class="ident">num_bytes</span> : <span class="ident">usize</span> , <span class="ident">ctx_from</span> : <span class="ident">TVMContext</span> , <span class="ident">ctx_to</span> : <span class="ident">TVMContext</span> , <span class="ident">type_hint</span> : <span class="ident">DLDataType</span> , <span class="ident">stream</span> : <span class="ident">TVMStreamHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Check that an object is derived from another.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param child_type_index The type index of the derived type.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param parent_type_index The type index of the parent type.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param is_derived A boolean representing whether this predicate holds.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when success, -1 when failure happens.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMObjectDerivedFrom</span> (<span class="ident">child_type_index</span> : <span class="ident">u32</span> , <span class="ident">parent_type_index</span> : <span class="ident">u32</span> , <span class="ident">is_derived</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Signature for backend functions exported as DLL.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param args The arguments&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param type_codes The type codes of the arguments&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param num_args Number of arguments.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_ret_value The output value of the the return value.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out_ret_tcode The output type code of the return value.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param resource_handle Pointer to associated resource.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 if success, -1 if failure happens, set error via TVMAPISetLastError.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">TVMBackendPackedCFunc</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">args</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">type_codes</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">num_args</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">out_ret_value</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMValue</span> , <span class="ident">out_ret_tcode</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">resource_handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> ; <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Backend function for modules to get function&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  from its environment mod_node (its imports and global function).&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  The user do should not call TVMFuncFree on func.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param mod_node The module handle.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param func_name The name of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param out The result function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendGetFuncFromEnv</span> (<span class="ident">mod_node</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">func_name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">out</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMFunctionHandle</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Backend function to register system-wide library symbol.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param name The name of the symbol&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ptr The symbol address.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendRegisterSystemLibSymbol</span> (<span class="ident">name</span> : <span class="op">*</span> <span class="kw">const</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> , <span class="ident">ptr</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Backend function to allocate temporal workspace.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\note The result allocated space is ensured to be aligned to kTempAllocaAlignment.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param nbytes The size of the space requested.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type which the space will be allocated.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id which the space will be allocated.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dtype_code_hint The type code of the array elements. Only used in&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; certain backends such as OpenGL.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param dtype_bits_hint The type bits of the array elements. Only used in&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; certain backends such as OpenGL.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return nullptr when error is thrown, a valid ptr if success&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendAllocWorkspace</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">nbytes</span> : <span class="ident">u64</span> , <span class="ident">dtype_code_hint</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">dtype_bits_hint</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Backend function to free temporal workspace.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param ptr The result allocated space pointer.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_type The device type which the space will be allocated.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param device_id The device id which the space will be allocated.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\sa TVMBackendAllocWorkspace&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendFreeWorkspace</span> (<span class="ident">device_type</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">device_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">ptr</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Environment for TVM parallel task.&quot;</span>] # [<span class="ident">repr</span> (<span class="ident">C</span>)] # [<span class="ident">derive</span> (<span class="ident">Debug</span> , <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">PartialEq</span> , <span class="ident">Eq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">TVMParallelGroupEnv</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Auxiliary used for synchronization&quot;</span>] <span class="kw">pub</span> <span class="ident">sync_handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief total amount of task&quot;</span>] <span class="kw">pub</span> <span class="ident">num_task</span> : <span class="ident">i32</span> , } <span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">TVMParallelGroupEnv</span> { <span class="kw">fn</span> <span class="ident">default</span> () <span class="op">-&gt;</span> <span class="self">Self</span> { <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief The callback function to execute a parallel lambda&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param task_id the task id of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param penv The parallel environment backs the execution.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param cdata The supporting closure data.&quot;</span>] <span class="kw">pub</span> <span class="kw">type</span> <span class="ident">FTVMParallelLambda</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">task_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">penv</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMParallelGroupEnv</span> , <span class="ident">cdata</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> ; <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Backend function for running parallel jobs.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param flambda The parallel function to be launched.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param cdata The closure data.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param num_task Number of tasks to launch, can be 0, means launch&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;           with all available threads.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendParallelLaunch</span> (<span class="ident">flambda</span> : <span class="ident">FTVMParallelLambda</span> , <span class="ident">cdata</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">num_task</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief BSP barrrier between parallel threads&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param task_id the task id of the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param penv The parallel environment backs the execution.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendParallelBarrier</span> (<span class="ident">task_id</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> , <span class="ident">penv</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="ident">TVMParallelGroupEnv</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; } <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\brief Simple static initialization function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  Run f once and set handle to be not null.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;  This function is mainly used for test purpose.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param handle A global address to indicate f&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param f The function to be run&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param cdata The closure data to pass to the function.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\param nbytes Number of bytes in the closure data.&quot;</span>] # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot; \\return 0 when no error is thrown, -1 when failure happens&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">TVMBackendRunOnce</span> (<span class="ident">handle</span> : <span class="op">*</span> <span class="kw-2">mut</span> <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">f</span> : :: <span class="ident">std</span> :: <span class="ident">option</span> :: <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">unsafe</span> <span class="kw">extern</span> <span class="string">&quot;C&quot;</span> <span class="kw">fn</span> (<span class="ident">arg1</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> <span class="op">&gt;</span> , <span class="ident">cdata</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">nbytes</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span>) <span class="op">-&gt;</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_int</span> ; }</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../../../";window.currentCrate = "tvm_sys";</script><script src="../../../../../../main.js"></script><script src="../../../../../../source-script.js"></script><script src="../../../../../../source-files.js"></script><script defer src="../../../../../../search-index.js"></script></body></html>