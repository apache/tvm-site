

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Install from Source &mdash; tvm 0.7.dev1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/tvm-logo-square.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/tvm_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NNPACK Contrib Installation" href="nnpack.html" />
    <link rel="prev" title="Installation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/tvm-logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">How to</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Install from Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#developers-get-source-from-github">Developers: Get Source from Github</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-the-shared-library">Build the Shared Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#building-on-windows">Building on Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-rocm-support">Building ROCm support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#python-package-installation">Python Package Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tvm-package">TVM package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-dependencies">Python dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-contrib-libraries">Install Contrib Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="nnpack.html">NNPACK Contrib Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enable-c-tests">Enable C++ Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Docker Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute to TVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/index.html">Deploy and Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/how_to.html">Developer How-To Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Get Started Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#compile-deep-learning-models">Compile Deep Learning Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#tensor-expression-and-schedules">Tensor Expression and Schedules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#optimize-tensor-operators">Optimize Tensor Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#autotvm-template-based-auto-tuning">AutoTVM : Template-based Auto Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#autoscheduler-template-free-auto-scheduling">AutoScheduler : Template-free Auto Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#developer-tutorials">Developer Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#topi-tvm-operator-inventory">TOPI: TVM Operator Inventory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#micro-tvm">Micro TVM</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../langref/index.html">Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/links.html">Links to Other API References</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Dive</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Design and Architecture</a></li>
</ul>
<p class="caption"><span class="caption-text">MISC</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vta/index.html">VTA: Deep Learning Accelerator Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tvm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installation</a> &raquo;</li>
        
      <li>Install from Source</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/from_source.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="install-from-source">
<span id="id1"></span><h1>Install from Source<a class="headerlink" href="#install-from-source" title="Permalink to this headline">¶</a></h1>
<p>This page gives instructions on how to build and install the TVM package from
scratch on various systems. It consists of two steps:</p>
<ol class="arabic simple">
<li><p>First build the shared library from the C++ codes (<cite>libtvm.so</cite> for linux, <cite>libtvm.dylib</cite> for macOS and <cite>libtvm.dll</cite> for windows).</p></li>
<li><p>Setup for the language packages (e.g. Python Package).</p></li>
</ol>
<p>To get started, download tvm source code from the <a class="reference external" href="https://tvm.apache.org/download">Download Page</a>.</p>
<div class="section" id="developers-get-source-from-github">
<h2>Developers: Get Source from Github<a class="headerlink" href="#developers-get-source-from-github" title="Permalink to this headline">¶</a></h2>
<p>You can also choose to clone the source repo from github.
It is important to clone the submodules along, with <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>git clone --recursive https://github.com/apache/incubator-tvm tvm
</pre></div>
</div>
<p>For windows users who use github tools, you can open the git shell, and type the following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>git submodule init
git submodule update
</pre></div>
</div>
</div>
<div class="section" id="build-the-shared-library">
<span id="build-shared-library"></span><h2>Build the Shared Library<a class="headerlink" href="#build-the-shared-library" title="Permalink to this headline">¶</a></h2>
<p>Our goal is to build the shared libraries:</p>
<ul class="simple">
<li><p>On Linux the target library are <cite>libtvm.so</cite></p></li>
<li><p>On macOS the target library are <cite>libtvm.dylib</cite></p></li>
<li><p>On Windows the target library are <cite>libtvm.dll</cite></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre>sudo apt-get update
sudo apt-get install -y python3 python3-dev python3-setuptools gcc libtinfo-dev zlib1g-dev build-essential cmake libedit-dev libxml2-dev
</pre></div>
</div>
<p>The minimal building requirements are</p>
<ul class="simple">
<li><p>A recent c++ compiler supporting C++ 14 (g++-5 or higher)</p></li>
<li><p>CMake 3.5 or higher</p></li>
<li><p>We highly recommend to build with LLVM to enable all the features.</p></li>
<li><p>If you want to use CUDA, CUDA toolkit version &gt;= 8.0 is required. If you are upgrading from an older version, make sure you purge the older version and reboot after installation.</p></li>
<li><p>On macOS, you may want to install <cite>Homebrew &lt;https://brew.sh&gt;</cite> to easily install and manage dependencies.</p></li>
</ul>
<p>We use cmake to build the library.
The configuration of TVM can be modified by <cite>config.cmake</cite>.</p>
<ul>
<li><p>First, check the cmake in your system. If you do not have cmake,
you can obtain the latest version from <a class="reference external" href="https://cmake.org/download/">official website</a></p></li>
<li><p>First create a build directory, copy the <code class="docutils literal notranslate"><span class="pre">cmake/config.cmake</span></code> to the directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>mkdir build
cp cmake/config.cmake build
</pre></div>
</div>
</li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">build/config.cmake</span></code> to customize the compilation options</p>
<ul class="simple">
<li><p>On macOS, for some versions of Xcode, you need to add <code class="docutils literal notranslate"><span class="pre">-lc++abi</span></code> in the LDFLAGS or you’ll get link errors.</p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">set(USE_CUDA</span> <span class="pre">OFF)</span></code> to <code class="docutils literal notranslate"><span class="pre">set(USE_CUDA</span> <span class="pre">ON)</span></code> to enable CUDA backend. Do the same for other backends and libraries
you want to build for (OpenCL, RCOM, METAL, VULKAN, …).</p></li>
<li><p>To help with debugging, ensure the embedded graph runtime and debugging functions are enabled with <code class="docutils literal notranslate"><span class="pre">set(USE_GRAPH_RUNTIME</span> <span class="pre">ON)</span></code> and <code class="docutils literal notranslate"><span class="pre">set(USE_GRAPH_RUNTIME_DEBUG</span> <span class="pre">ON)</span></code></p></li>
</ul>
</li>
<li><p>TVM optionally depends on LLVM. LLVM is required for CPU codegen that needs LLVM.</p>
<ul class="simple">
<li><p>LLVM 4.0 or higher is needed for build with LLVM. Note that version of LLVM from default apt may lower than 4.0.</p></li>
<li><p>Since LLVM takes long time to build from source, you can download pre-built version of LLVM from
<a class="reference external" href="http://releases.llvm.org/download.html">LLVM Download Page</a>.</p>
<ul>
<li><p>Unzip to a certain location, modify <code class="docutils literal notranslate"><span class="pre">build/config.cmake</span></code> to add <code class="docutils literal notranslate"><span class="pre">set(USE_LLVM</span> <span class="pre">/path/to/your/llvm/bin/llvm-config)</span></code></p></li>
<li><p>You can also directly set <code class="docutils literal notranslate"><span class="pre">set(USE_LLVM</span> <span class="pre">ON)</span></code> and let cmake search for a usable version of LLVM.</p></li>
</ul>
</li>
<li><p>You can also use <a class="reference external" href="https://apt.llvm.org/">LLVM Nightly Ubuntu Build</a></p>
<ul>
<li><p>Note that apt-package append <code class="docutils literal notranslate"><span class="pre">llvm-config</span></code> with version number.
For example, set <code class="docutils literal notranslate"><span class="pre">set(LLVM_CONFIG</span> <span class="pre">llvm-config-4.0)</span></code> if you installed 4.0 package</p></li>
</ul>
</li>
</ul>
</li>
<li><p>We can then build tvm and related libraries.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="nb">cd</span> build
cmake ..
make -j4
</pre></div>
</div>
<ul class="simple">
<li><p>You can also use Ninja build system instead of Unix Makefiles. It can be faster to build than using Makefiles.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="nb">cd</span> build
cmake .. -G Ninja
ninja
</pre></div>
</div>
</li>
</ul>
<p>If everything goes well, we can go to <a class="reference internal" href="#python-package-installation"><span class="std std-ref">Python Package Installation</span></a></p>
<div class="section" id="building-on-windows">
<h3>Building on Windows<a class="headerlink" href="#building-on-windows" title="Permalink to this headline">¶</a></h3>
<p>TVM support build via MSVC using cmake. The minimum required VS version is <strong>Visual Studio Community 2015 Update 3</strong>.
In order to generate the VS solution file using cmake, make sure you have a recent version of cmake added to your path and then from the TVM directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>mkdir build
<span class="nb">cd</span> build
cmake -G <span class="s2">&quot;Visual Studio 14 2015 Win64&quot;</span> -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DCMAKE_CONFIGURATION_TYPES<span class="o">=</span><span class="s2">&quot;Release&quot;</span> ..
</pre></div>
</div>
<p>Starting with Visual Studio 2019 the architecture is specified differently so use this command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>cmake -G <span class="s2">&quot;Visual Studio 16 2019&quot;</span> -A x64 -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DCMAKE_CONFIGURATION_TYPES<span class="o">=</span><span class="s2">&quot;Release&quot;</span> ..
</pre></div>
</div>
<p>This will generate the VS project using the MSVC 64 bit generator.
Open the .sln file in the build directory and build with Visual Studio.
In order to build with LLVM in windows, you will need to build LLVM from source.</p>
</div>
<div class="section" id="building-rocm-support">
<h3>Building ROCm support<a class="headerlink" href="#building-rocm-support" title="Permalink to this headline">¶</a></h3>
<p>Currently, ROCm is supported only on linux, so all the instructions are written with linux in mind.</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">set(USE_ROCM</span> <span class="pre">ON)</span></code>, set ROCM_PATH to the correct path.</p></li>
<li><p>You need to first install HIP runtime from ROCm. Make sure the installation system has ROCm installed in it.</p></li>
<li><p>Install latest stable version of LLVM (v6.0.1), and LLD, make sure <code class="docutils literal notranslate"><span class="pre">ld.lld</span></code> is available via command line.</p></li>
</ul>
</div>
</div>
<div class="section" id="python-package-installation">
<span id="id2"></span><h2>Python Package Installation<a class="headerlink" href="#python-package-installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tvm-package">
<h3>TVM package<a class="headerlink" href="#tvm-package" title="Permalink to this headline">¶</a></h3>
<p>Depending on your development environment, you may want to use a virtual environment and package manager, such
as <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code>, to manage your python packages and dependencies.</p>
<p>to install and maintain your python development environment.</p>
<p>The python package is located at <cite>tvm/python</cite>
There are two ways to install the package:</p>
<dl>
<dt>Method 1</dt><dd><p>This method is <strong>recommended for developers</strong> who may change the codes.</p>
<p>Set the environment variable <cite>PYTHONPATH</cite> to tell python where to find
the library. For example, assume we cloned <cite>tvm</cite> on the home directory
<cite>~</cite>. then we can added the following line in <cite>~/.bashrc</cite>.
The changes will be immediately reflected once you pull the code and rebuild the project (no need to call <code class="docutils literal notranslate"><span class="pre">setup</span></code> again)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="nb">export</span> <span class="nv">TVM_HOME</span><span class="o">=</span>/path/to/tvm
<span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span>$TVM_HOME/python:<span class="si">${</span><span class="nv">PYTHONPATH</span><span class="si">}</span>
</pre></div>
</div>
</dd>
<dt>Method 2</dt><dd><p>Install TVM python bindings by <cite>setup.py</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="c1"># install tvm package for the current user</span>
<span class="c1"># NOTE: if you installed python via homebrew, --user is not needed during installaiton</span>
<span class="c1">#       it will be automatically installed to your user directory.</span>
<span class="c1">#       providing --user flag may trigger error during installation in such case.</span>
<span class="nb">export</span> <span class="nv">MACOSX_DEPLOYMENT_TARGET</span><span class="o">=</span>10.9  <span class="c1"># This is required for mac to avoid symbol conflicts with libstdc++</span>
<span class="nb">cd</span> python<span class="p">;</span> python setup.py install --user<span class="p">;</span> <span class="nb">cd</span> ..
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="python-dependencies">
<h3>Python dependencies<a class="headerlink" href="#python-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag is not necessary if you’re installing to a managed local environment,
like <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p>Necessary dependencies:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre>pip3 install --user numpy decorator attrs
</pre></div>
</div>
<ul class="simple">
<li><p>If you want to use RPC Tracker</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre>pip3 install --user tornado
</pre></div>
</div>
<ul class="simple">
<li><p>If you want to use auto-tuning module</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre>pip3 install --user tornado psutil xgboost
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="install-contrib-libraries">
<h2>Install Contrib Libraries<a class="headerlink" href="#install-contrib-libraries" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="nnpack.html">NNPACK Contrib Installation</a></li>
</ul>
</div>
</div>
<div class="section" id="enable-c-tests">
<h2>Enable C++ Tests<a class="headerlink" href="#enable-c-tests" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="https://github.com/google/googletest">Google Test</a> to drive the C++
tests in TVM. The easiest way to install GTest is from source.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre>git clone https://github.com/google/googletest
<span class="nb">cd</span> googletest
mkdir build
<span class="nb">cd</span> build
cmake ..
make
make install
</pre></div>
</div>
</div></blockquote>
<p>After installing GTest, the C++ tests can be built and started with <code class="docutils literal notranslate"><span class="pre">./tests/scripts/task_cpp_unittest.sh</span></code> or just built with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cpptest</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nnpack.html" class="btn btn-neutral float-right" title="NNPACK Contrib Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Apache Software Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75982049-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>