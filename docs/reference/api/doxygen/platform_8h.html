<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tvm: include/tvm/runtime/crt/platform.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tvm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b4c7d8e826c599ba55146c099a14beb5.html">tvm</a></li><li class="navelem"><a class="el" href="dir_404558507ed35459f0d7a6d81d8c508d.html">runtime</a></li><li class="navelem"><a class="el" href="dir_a2900df4deca8dd2bcded616f0fe650a.html">crt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">platform.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The virtual memory manager for micro-controllers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;<a class="el" href="c__runtime__api_8h_source.html">tvm/runtime/c_runtime_api.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="error__codes_8h_source.html">tvm/runtime/crt/error_codes.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for platform.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="platform_8h__incl.svg" width="516" height="216"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="platform_8h__dep__incl.svg" width="170" height="231"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="platform_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a47980e4ea2182978f94ca87cc15ca0c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a47980e4ea2182978f94ca87cc15ca0c8">TVMPlatformAbort</a> (<a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a> code)</td></tr>
<tr class="memdesc:a47980e4ea2182978f94ca87cc15ca0c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when an internal error occurs and execution cannot continue.  <a href="#a47980e4ea2182978f94ca87cc15ca0c8">More...</a><br /></td></tr>
<tr class="separator:a47980e4ea2182978f94ca87cc15ca0c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dfecb024ace62e724817f90b6407285"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a6dfecb024ace62e724817f90b6407285">TVMPlatformFormatMessage</a> (char *out_buf, size_t out_buf_size_bytes, const char *fmt, va_list args)</td></tr>
<tr class="memdesc:a6dfecb024ace62e724817f90b6407285"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the microTVM RPC server to implement TVMLogf.  <a href="#a6dfecb024ace62e724817f90b6407285">More...</a><br /></td></tr>
<tr class="separator:a6dfecb024ace62e724817f90b6407285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133959eaf3ec68c568bdb71fcb94ddcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a133959eaf3ec68c568bdb71fcb94ddcb">TVMPlatformMemoryAllocate</a> (size_t num_bytes, DLDevice dev, void **out_ptr)</td></tr>
<tr class="memdesc:a133959eaf3ec68c568bdb71fcb94ddcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory for use by TVM.  <a href="#a133959eaf3ec68c568bdb71fcb94ddcb">More...</a><br /></td></tr>
<tr class="separator:a133959eaf3ec68c568bdb71fcb94ddcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890631daad5b14e3c9fd34b94e41eaed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a890631daad5b14e3c9fd34b94e41eaed">TVMPlatformMemoryFree</a> (void *ptr, DLDevice dev)</td></tr>
<tr class="memdesc:a890631daad5b14e3c9fd34b94e41eaed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory used by TVM.  <a href="#a890631daad5b14e3c9fd34b94e41eaed">More...</a><br /></td></tr>
<tr class="separator:a890631daad5b14e3c9fd34b94e41eaed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1accf5aa6941b2f22e69b2f1870a1be6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a1accf5aa6941b2f22e69b2f1870a1be6">TVMPlatformTimerStart</a> ()</td></tr>
<tr class="memdesc:a1accf5aa6941b2f22e69b2f1870a1be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a device timer.  <a href="#a1accf5aa6941b2f22e69b2f1870a1be6">More...</a><br /></td></tr>
<tr class="separator:a1accf5aa6941b2f22e69b2f1870a1be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a9ab0c374c97f35295008eff51d034"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a02a9ab0c374c97f35295008eff51d034">TVMPlatformTimerStop</a> (double *elapsed_time_seconds)</td></tr>
<tr class="memdesc:a02a9ab0c374c97f35295008eff51d034"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the running device timer and get the elapsed time (in microseconds).  <a href="#a02a9ab0c374c97f35295008eff51d034">More...</a><br /></td></tr>
<tr class="separator:a02a9ab0c374c97f35295008eff51d034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92f8606f31e9b8ccaf02024bd4dbeb0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="platform_8h.html#a92f8606f31e9b8ccaf02024bd4dbeb0e">TVMPlatformGenerateRandom</a> (uint8_t *buffer, size_t num_bytes)</td></tr>
<tr class="memdesc:a92f8606f31e9b8ccaf02024bd4dbeb0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill a buffer with random data.  <a href="#a92f8606f31e9b8ccaf02024bd4dbeb0e">More...</a><br /></td></tr>
<tr class="separator:a92f8606f31e9b8ccaf02024bd4dbeb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The virtual memory manager for micro-controllers. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a47980e4ea2182978f94ca87cc15ca0c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47980e4ea2182978f94ca87cc15ca0c8">&#9670;&nbsp;</a></span>TVMPlatformAbort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TVMPlatformAbort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a>&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when an internal error occurs and execution cannot continue. </p>
<p>The platform should ideally restart or hang at this point.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>An error code. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6dfecb024ace62e724817f90b6407285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dfecb024ace62e724817f90b6407285">&#9670;&nbsp;</a></span>TVMPlatformFormatMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t TVMPlatformFormatMessage </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_buf_size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the microTVM RPC server to implement TVMLogf. </p>
<p>Not required to be implemented when the RPC server is not linked into the binary. This function's signature matches that of vsnprintf, so trivial implementations can just call vsnprintf.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_buf</td><td>A char buffer where the formatted string should be written. </td></tr>
    <tr><td class="paramname">out_buf_size_bytes</td><td>Number of bytes available for writing in out_buf. </td></tr>
    <tr><td class="paramname">fmt</td><td>The printf-style formatstring. </td></tr>
    <tr><td class="paramname">args</td><td>extra arguments to be formatted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes written. </dd></dl>

</div>
</div>
<a id="a92f8606f31e9b8ccaf02024bd4dbeb0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92f8606f31e9b8ccaf02024bd4dbeb0e">&#9670;&nbsp;</a></span>TVMPlatformGenerateRandom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a> TVMPlatformGenerateRandom </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill a buffer with random data. </p>
<p>Cryptographically-secure random data is NOT required. This function is intended for use cases such as filling autotuning input tensors and choosing the nonce used for microTVM RPC.</p>
<p>This function does not need to be implemented for inference tasks. It is used only by AutoTVM and the RPC server. When not implemented, an internal weak-linked stub is provided.</p>
<p>Please take care that across successive resets, this function returns different sequences of values. If e.g. the random number generator is seeded with the same value, it may make it difficult for a host to detect device resets during autotuning or host-driven inference.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the 0th byte to write with random data. <code>num_bytes</code> of random data should be written here. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>Number of bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>kTvmErrorNoError if successful; a descriptive error code otherwise. </dd></dl>

</div>
</div>
<a id="a133959eaf3ec68c568bdb71fcb94ddcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a133959eaf3ec68c568bdb71fcb94ddcb">&#9670;&nbsp;</a></span>TVMPlatformMemoryAllocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a> TVMPlatformMemoryAllocate </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DLDevice&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>out_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate memory for use by TVM. </p>
<p>When this function returns something other than kTvmErrorNoError, *out_ptr should not be modified and the caller is not obligated to call TVMPlatformMemoryFree in order to avoid a memory leak.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_bytes</td><td>Number of bytes requested. </td></tr>
    <tr><td class="paramname">dev</td><td>Execution device that will be used with the allocated memory. Fixed to {kDLCPU, 0}. </td></tr>
    <tr><td class="paramname">out_ptr</td><td>A pointer to which is written a pointer to the newly-allocated memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>kTvmErrorNoError if successful; a descriptive error code otherwise. </dd></dl>

</div>
</div>
<a id="a890631daad5b14e3c9fd34b94e41eaed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890631daad5b14e3c9fd34b94e41eaed">&#9670;&nbsp;</a></span>TVMPlatformMemoryFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a> TVMPlatformMemoryFree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DLDevice&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free memory used by TVM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>A pointer returned from TVMPlatformMemoryAllocate which should be free'd. </td></tr>
    <tr><td class="paramname">dev</td><td>Execution device passed to TVMPlatformMemoryAllocate. Fixed to {kDLCPU, 0}. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>kTvmErrorNoError if successful; a descriptive error code otherwise. </dd></dl>

</div>
</div>
<a id="a1accf5aa6941b2f22e69b2f1870a1be6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1accf5aa6941b2f22e69b2f1870a1be6">&#9670;&nbsp;</a></span>TVMPlatformTimerStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a> TVMPlatformTimerStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a device timer. </p>
<p>The device timer used must not be running.</p>
<dl class="section return"><dt>Returns</dt><dd>kTvmErrorNoError if successful; a descriptive error code otherwise. </dd></dl>

</div>
</div>
<a id="a02a9ab0c374c97f35295008eff51d034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02a9ab0c374c97f35295008eff51d034">&#9670;&nbsp;</a></span>TVMPlatformTimerStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error__codes_8h.html#a77b4da0131882f0c9b887a47dd34467a">tvm_crt_error_t</a> TVMPlatformTimerStop </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>elapsed_time_seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the running device timer and get the elapsed time (in microseconds). </p>
<p>The device timer used must be running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elapsed_time_seconds</td><td>Pointer to write elapsed time into.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>kTvmErrorNoError if successful; a descriptive error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
