<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tvm: include/tvm/runtime/object.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tvm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b4c7d8e826c599ba55146c099a14beb5.html">tvm</a></li><li class="navelem"><a class="el" href="dir_404558507ed35459f0d7a6d81d8c508d.html">runtime</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">object.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A managed object in the TVM runtime.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;tvm/ffi/cast.h&gt;</code><br />
<code>#include &lt;tvm/ffi/object.h&gt;</code><br />
<code>#include &lt;tvm/ffi/optional.h&gt;</code><br />
<code>#include &lt;<a class="el" href="runtime_2base_8h_source.html">tvm/runtime/base.h</a>&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for object.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="object_8h__incl.svg" width="682" height="202"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="object_8h__dep__incl.svg" width="13116" height="2003"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="object_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacetvm"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetvm.html">tvm</a></td></tr>
<tr class="memdesc:namespacetvm"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performance counters for profiling via the PAPI library. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacetvm_1_1runtime"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetvm_1_1runtime.html">tvm::runtime</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a06b57185e07e0065383528eb655fe4d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="object_8h.html#a06b57185e07e0065383528eb655fe4d8">TVM_DEFINE_DEFAULT_COPY_MOVE_AND_ASSIGN</a>(TypeName)</td></tr>
<tr class="separator:a06b57185e07e0065383528eb655fe4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8330e3864503fb7c4133ae4d48fe4a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="object_8h.html#af8330e3864503fb7c4133ae4d48fe4a2">TVM_DEFINE_OBJECT_REF_COW_METHOD</a>(ObjectName)</td></tr>
<tr class="memdesc:af8330e3864503fb7c4133ae4d48fe4a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define CopyOnWrite function in an ObjectRef.  <a href="object_8h.html#af8330e3864503fb7c4133ae4d48fe4a2">More...</a><br /></td></tr>
<tr class="separator:af8330e3864503fb7c4133ae4d48fe4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac2f49cc6dcb98e8f9ef6f3f2233ca6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="object_8h.html#a6ac2f49cc6dcb98e8f9ef6f3f2233ca6">TVM_FFI_DEFINE_OBJECT_REF_METHODS_NULLABLE_WITHOUT_DEFAULT_CONSTRUCTOR</a>( TypeName,  ParentType,  ObjectName)</td></tr>
<tr class="separator:a6ac2f49cc6dcb98e8f9ef6f3f2233ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b72d9155e59e0d4dcdf674c90e64c7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="object_8h.html#a7b72d9155e59e0d4dcdf674c90e64c7e">TVM_STR_CONCAT_</a>(__x,  __y)&#160;&#160;&#160;__x##__y</td></tr>
<tr class="separator:a7b72d9155e59e0d4dcdf674c90e64c7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73bf3e57b9d7a6e0dd55d901321d01ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="object_8h.html#a73bf3e57b9d7a6e0dd55d901321d01ed">TVM_STR_CONCAT</a>(__x,  __y)&#160;&#160;&#160;<a class="el" href="object_8h.html#a7b72d9155e59e0d4dcdf674c90e64c7e">TVM_STR_CONCAT_</a>(__x, __y)</td></tr>
<tr class="separator:a73bf3e57b9d7a6e0dd55d901321d01ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abfc320dbf7396f349bb015aec34a3b3f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3f">tvm::runtime::TypeIndex</a> : int32_t { <br />
&#160;&#160;<a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3faf5474ebdbaaa19e977334eefa4bbd611">tvm::runtime::kRuntimeModule</a> = TVMFFITypeIndex::kTVMFFIModule
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fa784a020f84753e81d49cd6212ca97457">tvm::runtime::kRuntimeTensor</a> = TVMFFITypeIndex::kTVMFFITensor
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fa88cf741bfe2461e6b9a718b4ceb13c61">tvm::runtime::kRuntimeShape</a> = TVMFFITypeIndex::kTVMFFIShape
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fabd14026b3a03064fa001caf5db19a1e9">tvm::runtime::kCustomStaticIndex</a> = TVMFFITypeIndex::kTVMFFIDynObjectBegin - 16
, <br />
&#160;&#160;<a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fa64c2fe96f9710738e921eba9a0647043">tvm::runtime::kRuntimePackedFunc</a> = kCustomStaticIndex + 1
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fa149e3537240d5889283fb48769bbb856">tvm::runtime::kRuntimeDiscoDRef</a> = kCustomStaticIndex + 2
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fabc94c22e14c33b9be181f00c0be9620b">tvm::runtime::kRuntimeRPCObjectRef</a> = kCustomStaticIndex + 3
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fabcee6d9c2e81240077eaf3ee3775e36f">tvm::runtime::kRuntimeString</a>
, <br />
&#160;&#160;<a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fa2a1e3d7c7627236861336275102881e1">tvm::runtime::kRuntimeMap</a>
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3faa89514ac36216daf735627790247c945">tvm::runtime::kRuntimeArray</a>
, <a class="el" href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3fa548302094bc9afb6bb14dc2a283c1014">tvm::runtime::kStaticIndexEnd</a>
<br />
 }</td></tr>
<tr class="memdesc:abfc320dbf7396f349bb015aec34a3b3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Namespace for the list of type index.  <a href="namespacetvm_1_1runtime.html#abfc320dbf7396f349bb015aec34a3b3f">More...</a><br /></td></tr>
<tr class="separator:abfc320dbf7396f349bb015aec34a3b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A managed object in the TVM runtime. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a06b57185e07e0065383528eb655fe4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b57185e07e0065383528eb655fe4d8">&#9670;&nbsp;</a></span>TVM_DEFINE_DEFAULT_COPY_MOVE_AND_ASSIGN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TVM_DEFINE_DEFAULT_COPY_MOVE_AND_ASSIGN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">TypeName</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  TypeName(<span class="keyword">const</span> TypeName&amp; other) = <span class="keywordflow">default</span>;              \</div>
<div class="line">  TypeName(TypeName&amp;&amp; other) = <span class="keywordflow">default</span>;                   \</div>
<div class="line">  TypeName&amp; operator=(<span class="keyword">const</span> TypeName&amp; other) = <span class="keywordflow">default</span>;   \</div>
<div class="line">  TypeName&amp; operator=(TypeName&amp;&amp; other) = <span class="keywordflow">default</span>;</div>
</div><!-- fragment -->
</div>
</div>
<a id="af8330e3864503fb7c4133ae4d48fe4a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8330e3864503fb7c4133ae4d48fe4a2">&#9670;&nbsp;</a></span>TVM_DEFINE_OBJECT_REF_COW_METHOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TVM_DEFINE_OBJECT_REF_COW_METHOD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ObjectName</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  static_assert(ObjectName::_type_final,                               \</div>
<div class="line">                <span class="stringliteral">&quot;TVM&#39;s CopyOnWrite may only be used for &quot;</span>              \</div>
<div class="line">                <span class="stringliteral">&quot;Object types that are declared as final, &quot;</span>            \</div>
<div class="line">                <span class="stringliteral">&quot;using the TVM_FFI_DECLARE_OBJECT_INFO_FINAL macro.&quot;</span>); \</div>
<div class="line">  ObjectName* CopyOnWrite() {                                          \</div>
<div class="line">    ICHECK(data_ != <span class="keyword">nullptr</span>);                                          \</div>
<div class="line">    if (!data_.unique()) {                                             \</div>
<div class="line">      auto n = ::tvm::ffi::make_object&lt;ObjectName&gt;(*(operator-&gt;()));   \</div>
<div class="line">      ObjectPtr&lt;Object&gt;(std::move(n)).swap(data_);                     \</div>
<div class="line">    }                                                                  \</div>
<div class="line">    return <span class="keyword">static_cast&lt;</span>ObjectName*<span class="keyword">&gt;</span>(data_.get());                      \</div>
<div class="line">  }</div>
</div><!-- fragment -->
<p>Define CopyOnWrite function in an ObjectRef. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ObjectName</td><td>The Type of the Node.</td></tr>
  </table>
  </dd>
</dl>
<p>CopyOnWrite will generate a unique copy of the internal node. The node will be copied if it is referenced by multiple places. The function returns the raw pointer to the node to allow modification of the content.</p>
<div class="fragment"><div class="line">MyCOWObjectRef ref, ref2;</div>
<div class="line">ref2 = ref;</div>
<div class="line">ref.CopyOnWrite()-&gt;value = new_value;</div>
<div class="line">assert(ref2-&gt;value == old_value);</div>
<div class="line">assert(ref-&gt;value == new_value);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a6ac2f49cc6dcb98e8f9ef6f3f2233ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac2f49cc6dcb98e8f9ef6f3f2233ca6">&#9670;&nbsp;</a></span>TVM_FFI_DEFINE_OBJECT_REF_METHODS_NULLABLE_WITHOUT_DEFAULT_CONSTRUCTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TVM_FFI_DEFINE_OBJECT_REF_METHODS_NULLABLE_WITHOUT_DEFAULT_CONSTRUCTOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">TypeName, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ParentType, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ObjectName&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keyword">explicit</span> TypeName(::tvm::ffi::ObjectPtr&lt;ObjectName&gt; n) : ParentType(n) {}                    \</div>
<div class="line">  TVM_DEFINE_DEFAULT_COPY_MOVE_AND_ASSIGN(TypeName);                                           \</div>
<div class="line">  const ObjectName* operator-&gt;()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>ObjectName*<span class="keyword">&gt;</span>(data_.get()); } \</div>
<div class="line">  const ObjectName* <span class="keyword">get</span>() <span class="keyword">const</span> { <span class="keywordflow">return</span> operator-&gt;(); }                                       \</div>
<div class="line">  using ContainerType = ObjectName;</div>
</div><!-- fragment -->
</div>
</div>
<a id="a73bf3e57b9d7a6e0dd55d901321d01ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73bf3e57b9d7a6e0dd55d901321d01ed">&#9670;&nbsp;</a></span>TVM_STR_CONCAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TVM_STR_CONCAT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="object_8h.html#a7b72d9155e59e0d4dcdf674c90e64c7e">TVM_STR_CONCAT_</a>(__x, __y)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b72d9155e59e0d4dcdf674c90e64c7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b72d9155e59e0d4dcdf674c90e64c7e">&#9670;&nbsp;</a></span>TVM_STR_CONCAT_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TVM_STR_CONCAT_</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__x##__y</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
